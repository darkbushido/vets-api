#! /usr/bin/env bash

ensure_git_root() {
  root_dir=$(git rev-parse --show-toplevel)

  if [ "$root_dir" != "$(pwd)" ]; then
    echo 'Please run from project root.'
    exit 1
  fi
}

compose_build() {
  docker-compose build
}

compose_up() {
  # docker-compose run vets-api bundle install
  # docker-compose up --force-recreate --remove-orphans
  docker-compose up --remove-orphans
}

ensure_git_root && compose_build && compose_up
